<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="notes.css" type="text/css" />
</head>
<body>
<h1 id="git-guacamole">Git Guacamole</h1>
<p><em>Credits to Bryon Smith (<a href="https://github.com/bsmith89">@bsmith89</a>) for this. He started <a href="https://github.com/bsmith89/git-novice-outline">this lesson</a>, <a href = "https://github.com/mickley">James Mickley </a> and I added to it </em></p>
<h2 id="pre-workshop-setup">Pre-Workshop Setup</h2>
<ul>
<li><code>mv ~/.gitconfig ~/.gitconfig~</code></li>
<li><code>mv ~/.bash_aliases ~/.bash_aliases~</code></li>
<li><code>PS1=&quot;$ &quot;</code></li>
<li>Open lesson for PhDComics slide: <a href="http://swcarpentry.github.io/git-novice/01-basics/" class="uri">http://swcarpentry.github.io/git-novice/01-basics/</a></li>
</ul>
<h3 id="open-up-socrative-again">Open up Socrative again</h3>
<ul>
<li>Log into Socrative <a href="https://b.socrative.com/login/student/" class="uri">https://b.socrative.com/login/student/</a></li>
<li>Type in UCSFSWC for the room name</li>
</ul>
<p><strong>QUESTION: How many of you have used git or other version control software before?</strong></p>
<h2 id="introduction-automated-version-control">1. Introduction: Automated Version Control</h2>
<ul>
<li>PhDComics slide</li>
<li>Unlimited undo, helps us know what each change does: Who made it &amp; why?</li>
<li>Lets people collaborate on the same code at the same time (Have you used google docs?)</li>
<li>All of these things are useful for repeatability, history, fixing problems etc.<br />
</li>
<li>Introduce the concept of repositories and commits</li>
</ul>
<h2 id="setting-up-git">2. Setting up Git</h2>
<ul>
<li>Git needs to know who we are (so we know who changed what)
<ul>
<li><code>git config --global user.name &quot;Vlad Dracula&quot;</code></li>
<li><code>git config --global user.email &quot;vlad@tran.sylvan.ia&quot;</code></li>
<li><code>git config --global color.ui &quot;auto&quot;</code></li>
<li><code>git config --global core.editor &quot;nano -w&quot;</code></li>
</ul></li>
<li><code>git config --list</code></li>
<li>To get help
<ul>
<li><code>git config --help</code> or git <command> -h</li>
</ul></li>
<li>Talk about how git is run with subcommands <code>git &lt;verb&gt;</code>
<ul>
<li>Kind of like saying bash <verb>. Git is another commandline interpreter</li>
</ul></li>
<li>If email privacy is needed:
<ul>
<li>https://help.github.com/articles/keeping-your-email-address-private/</li>
</ul></li>
</ul>
<h2 id="creating-a-repository">3. Creating a repository</h2>
<h4 id="where-does-git-store-information">Where does git store information</h4>
<ul>
<li>Create the repository
<ul>
<li><code>cd ~/Desktop</code></li>
<li><code>mkdir guacamole; cd guacamole</code></li>
<li><code>git init</code></li>
</ul></li>
<li>We can check that it's there. That .git folder stores all the data, don't delete!
<ul>
<li><code>ls -F -a</code></li>
</ul></li>
<li><code>git status</code></li>
</ul>
<h2 id="tracking-changes">4. Tracking changes</h2>
<h4 id="recording-changes-checking-status-and-adding-notes">Recording changes, checking status, and adding notes</h4>
<ul>
<li><code>nano instructions.txt</code></li>
<li>Write a super simple recipe (with bullet points)
<ul>
<li>Chop avocados, squeeze lime, add salt, and mix well</li>
</ul></li>
<li><code>git status</code>
<ul>
<li>One untracked file</li>
</ul></li>
<li><code>git add instruction.txt</code></li>
<li><code>git status</code></li>
<li>Now git knows to keep track of instructions.txt, but it hasn't recorded changes yet</li>
<li><code>git commit</code>
<ul>
<li>Adding instructions.txt</li>
<li>This is a short recipe for guacamole</li>
<li>Usually we add a 50 character summary as a title, and then get more descriptive</li>
</ul></li>
<li>Now that we've run commit, git saves it in the .git directory</li>
<li>Point out the identifier/hash</li>
<li><code>git status</code></li>
<li><p><code>git log</code></p></li>
<li><code>nano instructions.txt</code></li>
<li>Add &quot;Enjoy!&quot; as the last line</li>
<li><code>git status</code>
<ul>
<li>Point out the checkout to discard changes bit</li>
</ul></li>
<li><code>git diff</code></li>
<li><p>Discuss how to read a diff</p></li>
</ul>
<p><strong><em>---------- Socrative #1 ----------</em></strong></p>
<ul>
<li>Instead of opening an editor, we can just put the commit message in the command
<ul>
<li><code>git commit -m &quot;Edited the guacamole instructions</code></li>
<li>Oops, we need to add the file first</li>
<li><code>git status</code></li>
<li><code>git add instructions.txt</code></li>
<li><code>git commit -m &quot;Edited the guacamole instructions</code></li>
</ul></li>
<li><code>git log</code></li>
<li>Draw a diagram of the three &quot;areas&quot; of git
<ul>
<li>[filesystem] --&gt;add [staging area] --&gt;commit [repository]</li>
<li>Think of commit as taking a snapshot, and add as deciding what's in it</li>
<li>Staging area
<ul>
<li>Lets us only commit some of our file changes.</li>
<li>Keep changes with a related theme together</li>
</ul></li>
</ul></li>
</ul>
<p><strong><em>---------- Socrative #2 ----------</em></strong></p>
<p><strong><em>---------- Socrative #3 ----------</em></strong></p>
<ul>
<li>Add a new file <code>ingredients.txt</code>: 2 Avocados, 1 lime, 2 tsp salt
<ul>
<li><code>git status</code></li>
<li><code>git add ingredients.txt</code></li>
<li><code>git commit</code></li>
</ul></li>
<li>Add a new ingredient, onion, to both the instructions and the ingredients;
<ul>
<li><code>git status</code></li>
<li><code>git diff</code></li>
<li><code>git add .</code></li>
<li><code>git status</code></li>
<li><code>git commit -m &quot;Added onion to the recipe&quot;</code></li>
</ul></li>
<li>Discuss changes to multiple files</li>
<li><code>git log</code></li>
<li>Our log is getting long, some solutions:
<ul>
<li>d = down, u = up, q = quit</li>
<li><code>git log -2</code></li>
<li><code>git log --oneline</code></li>
</ul></li>
</ul>
<p><strong><em>---------- Socrative #4 ----------</em></strong></p>
<h2 id="exploring-history">5. Exploring History</h2>
<h4 id="identifying-and-recovering-old-versions-of-files-reviewing-changes">Identifying and recovering old versions of files, reviewing changes</h4>
<ul>
<li>Let's add another step to instructions.txt: Squeeze orange</li>
<li>Remember when we learned that each commit has an identifier?
<ul>
<li>The most recent commit is called HEAD,</li>
</ul></li>
<li><code>git diff HEAD instructions.txt</code></li>
<li><code>git diff HEAD~1 instructions.txt</code></li>
<li><code>HEAD</code> refers to the most recent commit</li>
<li><code>~1</code> means &quot;minus one&quot;</li>
<li><code>git log --oneline</code></li>
<li><p><code>git diff &lt;HASH&gt; instructions.txt</code></p></li>
<li>If we can see past states, we can also restore them! Let's get rid of orange.</li>
<li><code>git status</code></li>
<li><code>git checkout HEAD instructions.txt</code></li>
<li><code>git status</code></li>
<li><code>cat instructions.txt</code></li>
<li><p>Notice that reverting a small change is much easier becuase we've split our work up into multiple files.</p></li>
</ul>
<p><strong><em>---------- Socrative #5 ----------</em></strong></p>
<p><strong><em>---------- Socrative #6 ----------</em></strong></p>
<h2 id="ignoring-things-.gitignore">6. Ignoring things (<code>.gitignore</code>)</h2>
<ul>
<li>What if we include some files that we don't want to track?
<ul>
<li><code>nano a.log</code></li>
<li><code>nano b.log</code></li>
<li><code>git status</code> could get obnoxious</li>
<li><code>nano .gitignore</code></li>
<li><code>git status</code></li>
<li><code>git add .gitignore</code></li>
<li><code>git commit -m &quot;Ignore some files.&quot;</code></li>
<li><code>git status</code></li>
</ul></li>
<li>We could add anyway by using the -f force option
<ul>
<li><code>git add a.log</code></li>
<li><code>git add -f a.log</code></li>
<li><code>git status</code></li>
<li><code>git reset HEAD .</code></li>
<li><code>git status</code></li>
<li><code>git status --ignored</code></li>
</ul></li>
</ul>
<h2 id="remotes-in-github">7. Remotes in Github</h2>
<ul>
<li>Git is great for collaboration!</li>
<li>Direct learners to make a github account and/or log in</li>
<li>Make a github repository called 'guacamole'
<ul>
<li>This is like mkdir, cd, and git init on the GitHub server</li>
<li>But we want to connect the two</li>
</ul></li>
<li>Follow the instructions to add the remote repository
<ul>
<li>Be sure to use HTTPS</li>
<li>SSH is preferred and more secure, but it's more complicated to setup</li>
<li><code>git remote add origin [URL]</code></li>
<li><code>git remote -v</code></li>
<li>The name origin is the local nickname for the remote repository.<br />
</li>
</ul></li>
<li>Push our local repository to the remote
<ul>
<li><code>git push origin master</code></li>
<li>Pushing branch master to origin</li>
</ul></li>
<li>Explore the repository on github
<ul>
<li>Viewing files, seeing history of file, editing</li>
</ul></li>
<li>Show students that local changes which are NOT committed don't end up on the remote.</li>
<li>Ask students to discuss the difference between 'commit' and 'push'.</li>
<li>To get the latest version FROM the remote:
<ul>
<li><code>git pull origin master</code></li>
</ul></li>
</ul>
<h2 id="collaborating">8. Collaborating</h2>
<ul>
<li>Pair students up into groups of two.</li>
<li>One student should add the other as a collaborator
<ul>
<li>Explain git clone</li>
<li><code>cd ~/Desktop</code></li>
<li><code>git clone https://github.com/mickley/guacamole.git ~/Desktop/james-guacamole</code></li>
<li><code>cd james-guacamole</code></li>
</ul></li>
<li><p>Make changes and push back to the collaborator's repository.</p></li>
<li>Back in your original repository:
<ul>
<li><code>git pull origin master</code></li>
<li><code>git status</code></li>
<li>Pull the collaborators changes to your own repository.</li>
<li>Check out the result.</li>
</ul></li>
</ul>
<h2 id="conflicts">9. Conflicts</h2>
<h4 id="how-git-handles-conflicts">How git handles conflicts</h4>
<ul>
<li>When people are working in parallel (or on 2 computers), there's a chance they could both edit the same file</li>
<li><p>So let's make one, and see what happens and what to do about it</p></li>
<li>Make an arbitrary change to your collaborators <code>instructions.txt</code>.</li>
<li>Push that change upstream.</li>
<li>Make (and commit) a different change to <em>your</em> <code>instructions.txt</code> <strong>on the same line as your collaborator changed</strong>.</li>
<li><p><code>git push origin master</code></p></li>
<li>What happened? Git detected overlap and prevented us from messing it up</li>
<li>We now have to get the changes from the server, and merge them with ours</li>
<li><code>git pull origin master</code></li>
<li><code>git status</code></li>
<li><code>cat instructions.txt</code></li>
<li>HEAD is your version, the commit id is the version on the github repository (your collaborator's)</li>
<li>You need to rectify things first before you can send it back to the repository
<ul>
<li><code>nano instruction.txt</code></li>
<li><code>git add instuctions.txt</code></li>
<li><code>git status</code></li>
<li><code>git commit &lt;...&gt;</code> This actually is the merge</li>
</ul></li>
<li><code>git log</code></li>
<li><p><code>git push origin master</code></p></li>
<li>In practice, it's a good idea to run <code>git pull origin master</code> before making changes</li>
<li>Show them how to comment on a diff in Github</li>
<li><p>Merging is another reason to split up changes into small groups of files</p></li>
</ul>
<h2 id="branching">15. Branching</h2>
<ul>
<li>Branching is just collaboration with yourself.<br />
</li>
<li>You're carrying on a parallel line of thought</li>
<li>Experiment with reformatting your entire thesis without risking your progress.</li>
<li>Or rewrite a paper for a particular publication</li>
</ul>
<h2 id="hosting">13. Hosting</h2>
<ul>
<li>One nice thing about git is that it's &quot;distributed&quot;
<ul>
<li>Any git repository can also be the server, there's no need for a central server</li>
<li>So two users can just collaborate with each other without the need for github etc.</li>
<li>It's also easy to move from github to some other service</li>
</ul></li>
<li>But websites like GitHub are very useful. They're a little nicer than the commandline version of git.
<ul>
<li>Github, however, is built on openness. By default all repositories are public</li>
<li>This may not be ideal for you, or may even be illegal (HIPAA)</li>
<li>Some options:
<ol style="list-style-type: decimal">
<li>Use another service that allows private repositories. Gitlab and Bitbucket are a bit better.<br />
</li>
<li>Apply for gitlab for Educational Use: https://education.github.com/discount_requests/new</li>
<li>Setup a computer as a server at your institution. More maintainence but you have control
<ul>
<li>You can even install your own private Gitlab or BitBucket</li>
</ul></li>
</ol></li>
</ul></li>
</ul>
<h2 id="open-science">10. Open Science</h2>
<ul>
<li>This is basically an electronic lab notebook</li>
<li>It's also a good way to share information for reproducibility
<ul>
<li>The data, and code are there together. Maybe also figures or the paper itself</li>
</ul></li>
</ul>
<h2 id="using-git-from-rstudio">14. Using Git from RStudio</h2>
<h2 id="licensing">11. Licensing</h2>
<h2 id="citation">12. Citation</h2>
</body>
</html>

    Contact GitHub API Training Shop Blog About 

    © 2016 GitHub, Inc. Terms Privacy Security Status Help 

